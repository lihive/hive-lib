"use strict";(()=>{var Q=class extends Error{constructor(t,r){super(`Tiles (${t.q},${t.r}) and (${r.q},${r.r}) are not adjacent.`)}},K=class extends Error{constructor(t){super(`Expected there to be a tile located at (${t.q}, ${t.r})`)}},U=class extends Error{constructor(t){super(`${t} is not a valid direction.`)}},N=class extends Error{constructor(t){super(`No tile at (${t.q}, ${t.r})`)}};var H=Math.sqrt(3),Me=Math.PI,yt={tileset:{A:3,B:2,G:3,S:2,Q:1}},Ht={id:"pointy-top",f0:H,f1:H/2,f2:0,f3:3/2,b0:H/3,b1:-1/3,b2:0,b3:2/3,startAngle:30},vt={id:"flat-top",f0:3/2,f1:0,f2:H/2,f3:H,b0:2/3,b1:0,b2:-1/3,b3:H/3,startAngle:0};function Mt(e,t){let r=(H/3*e.x-.3333333333333333*e.y)/t,o=2/3*e.y/t,n=-r-o,i=Math.round(r),a=Math.round(o),s=Math.round(n),c=Math.abs(i-r),u=Math.abs(a-o),d=Math.abs(s-n);return c>u&&c>d?i=-a-s:u>d&&(a=-i-s),{q:i,r:a}}function f(e){return`${e.q}${e.r}`}function Pt(e,t){return Math.abs(e.q-t.q)<=1&&Math.abs(e.r-t.r)<=1}function B(e,t){return!e||!t?!1:e.q===t.q&&e.r===t.r}function St(e){return 2*e}function Ve(e,t,r){let{q:o,r:n}=e,i=r;return{x:t*(i.f0*o+i.f1*n),y:t*(i.f2*o+i.f3*n)}}function wt(e,t,r){let{x:o,y:n}=Ve(e,t,r);return`translate(${o} ${n}) rotate(${r.startAngle})`}function It(e){return H*e}function v(e,t){return e.findIndex(r=>B(t,r))!==-1}function g(e,t){let{q:r,r:o}=e;switch(t){case 0:return e;case 1:return{q:r+1,r:o-1};case 2:return{q:r+1,r:o};case 3:return{q:r,r:o+1};case 4:return{q:r-1,r:o+1};case 5:return{q:r-1,r:o};case 6:return{q:r,r:o-1};default:throw new U(t)}}function Pe(e,t){let r=t.q-e.q,o=t.r-e.r;if(r===-1){if(o===0)return 5;if(o===1)return 4}if(r===0){if(o===-1)return 6;if(o===1)return 3}if(r===1){if(o===-1)return 1;if(o===0)return 2}throw new Q(e,t)}function fe(e){for(;e<1;)e+=6;return 1+(e-1)%6}function Se(e,t){return`${e}${t}`}function G(e){return e[1]}function I(e){return e[0]}function bt(e,t){return I(e)===t}function F(e,t){if(l(e,t))return[];let r=[];return A(e,t,o=>{r.push(o)}),h(e,t,o=>{r.push(o)}),T(e,t,o=>{r.push(o)}),r}function j(e,t){if(l(e,t))return[];let r=[];return k(o=>{let n=g(t,o),i=n;for(;we(e,i);)i=g(i,o);B(i,n)||r.push(i)}),r}function L(e,t){if(l(e,t))return[];let r=[],o=new Set,n=(i,a)=>{let s=a[a.length-1];a.length===1&&A(i,s,c=>{n(C(i,s,c),[...a,c])}),a.length===2&&(h(i,s,c=>{v(a,c)||n(C(i,s,c),[...a,c])}),A(i,s,c=>{v(a,c)||n(C(i,s,c),[...a,c])}),T(i,s,(c,u)=>{u.length>0&&!v(a,c)&&n(C(i,s,c),[...a,c])})),a.length===3&&T(i,s,(c,u)=>{u.length===0&&!v(a,c)&&!o.has(f(c))&&(r.push(c),o.add(f(c)))})};return n(e,[t]),r}function V(e,t){if(l(e,t))return[];let r=[];return h(e,t,o=>{r.push(o)}),r}function W(e,t){if(l(e,t))return[];let r=[],o=new Set,n=(i,a)=>{let s=a[a.length-1];h(i,s,c=>{if(!v(a,c))if(a.length===3){let u=f(c);o.has(u)||(o.add(u),r.push(c))}else n(C(i,s,c),[...a,c])})};return n(e,[t]),r}function J(e,t){if(l(e,t))return[];let r=[];return h(e,t,o=>{r.push(o)}),r}function Ie(e,t,r){if(l(e,t))return[];let o=[],n=Pe(t,r);return x(e,t)>1||z(e,t,n)?[]:(e=C(e,t,r),T(e,r,i=>{B(t,i)||o.push(i)}),o)}function ke(e,t){if(l(e,t))return[];if(x(e,t)>1)return F(e,t);let o=new Set;b(e,t,(s,c)=>{let u=G(c[c.length-1]);o.add(u)});let n=[],i=new Set,a=s=>{s.forEach(c=>{let u=f(c);i.has(u)||(i.add(u),n.push(c))})};return o.forEach(s=>{switch(s){case"A":a(X(e,t));break;case"B":a(F(e,t));break;case"G":a(j(e,t));break;case"L":a(L(e,t));break;case"P":a(J(e,t));break;case"Q":a(V(e,t));break;case"S":a(W(e,t));break}}),n}function Tr(){return{pass:!0}}function Mr(e,t){return{tileId:e,to:t}}function Pr(e,t){return{from:e,to:t}}function Sr(e){return e.length%2?"b":"w"}function Y(e){return"pass"in e&&e.pass}function Z(e){return"tileId"in e&&"to"in e}function ee(e){return"from"in e&&"to"in e}function l(e,t){if(x(e,t)>1)return!1;let r=de(e,t).at(0);if(!r)return!1;let o=be(e,r,t),n=le(e);return o.length!==n.length-1}function wr(e,t,r){let o=$(e,r);if(!o)return[];let n=[];if(I(o)===t)switch(G(o)){case"A":n=X(e,r);break;case"B":n=F(e,r);break;case"G":n=j(e,r);break;case"L":n=L(e,r);break;case"M":n=ke(e,r);break;case"P":n=J(e,r);break;case"Q":n=V(e,r);break;case"S":n=W(e,r);break}let i=[];if(b(e,r,(a,s)=>{let c=s[s.length-1];G(c)==="P"&&I(c)===t&&i.push(a)}),i.length){let a=new Set(n.map(f)),s=c=>{c.forEach(u=>{let d=f(u);a.has(d)||(a.add(d),n.push(u))})};i.forEach(c=>{s(Ie(e,r,c))})}return n}var Ae=Symbol.for("immer-nothing"),De=Symbol.for("immer-draftable"),p=Symbol.for("immer-state");function _(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var D=Object.getPrototypeOf;function E(e){return!!e&&!!e[p]}function P(e){return e?ze(e)||Array.isArray(e)||!!e[De]||!!e.constructor?.[De]||ie(e)||ae(e):!1}var We=Object.prototype.constructor.toString();function ze(e){if(!e||typeof e!="object")return!1;let t=D(e);if(t===null)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===We}function te(e,t){ne(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,o)=>t(o,r,e))}function ne(e){let t=e[p];return t?t.type_:Array.isArray(e)?1:ie(e)?2:ae(e)?3:0}function he(e,t){return ne(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function $e(e,t,r){let o=ne(e);o===2?e.set(t,r):o===3?e.add(r):e[t]=r}function Je(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ie(e){return e instanceof Map}function ae(e){return e instanceof Set}function M(e){return e.copy_||e.base_}function xe(e,t){if(ie(e))return new Map(e);if(ae(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&ze(e))return D(e)?{...e}:Object.assign(Object.create(null),e);let r=Object.getOwnPropertyDescriptors(e);delete r[p];let o=Reflect.ownKeys(r);for(let n=0;n<o.length;n++){let i=o[n],a=r[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(D(e),r)}function He(e,t=!1){return se(e)||E(e)||!P(e)||(ne(e)>1&&(e.set=e.add=e.clear=e.delete=Xe),Object.freeze(e),t&&Object.entries(e).forEach(([r,o])=>He(o,!0))),e}function Xe(){_(2)}function se(e){return Object.isFrozen(e)}var Ye={};function S(e){let t=Ye[e];return t||_(0,e),t}var q;function qe(){return q}function Ze(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ee(e,t){t&&(S("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ge(e){Ce(e),e.drafts_.forEach(et),e.drafts_=null}function Ce(e){e===q&&(q=e.parent_)}function Oe(e){return q=Ze(q,e)}function et(e){let t=e[p];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ne(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return e!==void 0&&e!==r?(r[p].modified_&&(ge(t),_(4)),P(e)&&(e=re(t,e),t.parent_||oe(t,e)),t.patches_&&S("Patches").generateReplacementPatches_(r[p].base_,e,t.patches_,t.inversePatches_)):e=re(t,r,[]),ge(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ae?e:void 0}function re(e,t,r){if(se(t))return t;let o=t[p];if(!o)return te(t,(n,i)=>Fe(e,o,t,n,i,r)),t;if(o.scope_!==e)return t;if(!o.modified_)return oe(e,o.base_,!0),o.base_;if(!o.finalized_){o.finalized_=!0,o.scope_.unfinalizedDrafts_--;let n=o.copy_,i=n,a=!1;o.type_===3&&(i=new Set(n),n.clear(),a=!0),te(i,(s,c)=>Fe(e,o,n,s,c,r,a)),oe(e,n,!1),r&&e.patches_&&S("Patches").generatePatches_(o,r,e.patches_,e.inversePatches_)}return o.copy_}function Fe(e,t,r,o,n,i,a){if(E(n)){let s=i&&t&&t.type_!==3&&!he(t.assigned_,o)?i.concat(o):void 0,c=re(e,n,s);if($e(r,o,c),E(c))e.canAutoFreeze_=!1;else return}else a&&r.add(n);if(P(n)&&!se(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;re(e,n),(!t||!t.scope_.parent_)&&typeof o!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,o)&&oe(e,n)}}function oe(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&He(t,r)}function tt(e,t){let r=Array.isArray(e),o={type_:r?1:0,scope_:t?t.scope_:qe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},n=o,i=ve;r&&(n=[o],i=R);let{revoke:a,proxy:s}=Proxy.revocable(n,i);return o.draft_=s,o.revoke_=a,s}var ve={get(e,t){if(t===p)return e;let r=M(e);if(!he(r,t))return rt(e,r,t);let o=r[t];return e.finalized_||!P(o)?o:o===pe(e.base_,t)?(me(e),e.copy_[t]=ye(o,e)):o},has(e,t){return t in M(e)},ownKeys(e){return Reflect.ownKeys(M(e))},set(e,t,r){let o=Re(M(e),t);if(o?.set)return o.set.call(e.draft_,r),!0;if(!e.modified_){let n=pe(M(e),t),i=n?.[p];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Je(r,n)&&(r!==void 0||he(e.base_,t)))return!0;me(e),_e(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return pe(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,me(e),_e(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){let r=M(e),o=Reflect.getOwnPropertyDescriptor(r,t);return o&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:o.enumerable,value:r[t]}},defineProperty(){_(11)},getPrototypeOf(e){return D(e.base_)},setPrototypeOf(){_(12)}},R={};te(ve,(e,t)=>{R[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});R.deleteProperty=function(e,t){return R.set.call(this,e,t,void 0)};R.set=function(e,t,r){return ve.set.call(this,e[0],t,r,e[0])};function pe(e,t){let r=e[p];return(r?M(r):e)[t]}function rt(e,t,r){let o=Re(t,r);return o?"value"in o?o.value:o.get?.call(e.draft_):void 0}function Re(e,t){if(!(t in e))return;let r=D(e);for(;r;){let o=Object.getOwnPropertyDescriptor(r,t);if(o)return o;r=D(r)}}function _e(e){e.modified_||(e.modified_=!0,e.parent_&&_e(e.parent_))}function me(e){e.copy_||(e.copy_=xe(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var ot=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,o)=>{if(typeof t=="function"&&typeof r!="function"){let i=r;r=t;let a=this;return function(c=i,...u){return a.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&_(6),o!==void 0&&typeof o!="function"&&_(7);let n;if(P(t)){let i=Oe(this),a=ye(t,void 0),s=!0;try{n=r(a),s=!1}finally{s?ge(i):Ce(i)}return Ee(i,o),Ne(n,i)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===Ae&&(n=void 0),this.autoFreeze_&&He(n,!0),o){let i=[],a=[];S("Patches").generateReplacementPatches_(t,n,i,a),o(i,a)}return n}else _(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(a,...s)=>this.produceWithPatches(a,c=>t(c,...s));let o,n;return[this.produce(t,r,(a,s)=>{o=a,n=s}),o,n]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){P(e)||_(8),E(e)&&(e=nt(e));let t=Oe(this),r=ye(e,void 0);return r[p].isManual_=!0,Ce(t),r}finishDraft(e,t){let r=e&&e[p];(!r||!r.isManual_)&&_(9);let{scope_:o}=r;return Ee(o,t),Ne(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));let o=S("Patches").applyPatches_;return E(e)?o(e,t):this.produce(e,n=>o(n,t))}};function ye(e,t){let r=ie(e)?S("MapSet").proxyMap_(e,t):ae(e)?S("MapSet").proxySet_(e,t):tt(e,t);return(t?t.scope_:qe()).drafts_.push(r),r}function nt(e){return E(e)||_(10,e),Qe(e)}function Qe(e){if(!P(e)||se(e))return e;let t=e[p],r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=xe(e,t.scope_.immer_.useStrictShallowCopy_)}else r=xe(e,!0);return te(r,(o,n)=>{$e(r,o,Qe(n))}),t&&(t.finalized_=!1),r}var m=new ot,ce=m.produce,kr=m.produceWithPatches.bind(m),br=m.setAutoFreeze.bind(m),Dr=m.setUseStrictShallowCopy.bind(m),Er=m.applyPatches.bind(m),Or=m.createDraft.bind(m),Nr=m.finishDraft.bind(m);function Kr(e,t,r){let o=0,n=`${t}Q`;return Ke(e,n).forEach(a=>{y(e,a).forEach(s=>{s===n&&(o+=1)})}),o===r.tileset.Q}function Ur(e,t){return Ke(e,`${t}Q`).every(o=>it(e,o,(n,i)=>i.length>0))}function jr(...e){return t=>e.reduce((r,o)=>o(r),t)}function A(e,t,r){let o=x(e,t);return o?k(n=>{let i=g(t,n),a=y(e,i);return a.length>=o&&!z(e,t,n)?r(i,a,n):!0}):!0}function k(e){for(let t=1;t<=6;++t)if(e(t)==!1)return!1;return!0}function T(e,t,r){let o=x(e,t);return o?k(n=>{let i=g(t,n),a=y(e,i);return o-a.length>=2&&!z(e,t,n)?r(i,a,n):!0}):!0}function O(e,t,r){return k(o=>{let n=g(t,o);return r(n,y(e,n),o)!==!1})}function b(e,t,r){return k(o=>{let n=g(t,o),i=y(e,n);return i.length?r(n,i)!==!1:!0})}function h(e,t,r){let o=y(e,t),n=de(e,t),i=a=>v(n,a);return o?O(e,t,(a,s,c)=>o.length-s.length===1&&!z(e,t,c)&&(o.length>1||ut(e,a,i))?r(a,s,c):!0):!0}function w(e,t){for(let r in e)for(let o in e[r]){let n=e[r][o];if(t({q:+r,r:+o},n)===!1)return!1}return!0}function Lr(e,t){let r=new Set;return w(e,o=>O(e,o,(n,i)=>{let a=f(n);return!r.has(a)&&!i.length?(r.add(a),t(n,i)!==!1):!0}))}function it(e,t,r){return O(e,t,(o,n)=>r(o,n)===!0)}function Vr(e,t,r){let o;return O(e,t,(n,i)=>r(n,i)?(o=n,!1):!0),o}function Ke(e,t){let r=[];return w(e,(o,n)=>{n.includes(t)&&r.push(o)}),r}function Wr(e,t){let r={};return t=t??e.length,e.slice(0,t).forEach(o=>{Y(o)||(Z(o)&&ue(r,o.tileId,o.to),ee(o)&&Be(r,o.from,o.to))}),r}function Jr(e,t,r){let o=0;return w(e,(n,i)=>{!t&&!r?o+=i.length:i.forEach(a=>{let s=t!==void 0?I(a)===t:!0,c=r!==void 0?G(a)===r:!0;s&&c&&(o+=1)})}),o}function le(e){let t=[];return w(e,r=>t.push(r)),t}function de(e,t){let r=[];return b(e,t,o=>{r.push(o)}),r}function y(e,t){let{q:r,r:o}=t,n=e[r];return n?n[o]??[]:[]}function Xr(e,t){let r=[];return w(e,(o,n)=>r.push({coordinate:o,tiles:n})),t&&ct(r),r}function x(e,t){return y(e,t).length}function $(e,t){return y(e,t).at(-1)}function Yr(e){let t=[];return w(e,(r,o)=>t.push(...o)),t}function Ue(e){let t=[];return w(e,(r,o)=>t.push(...o)),t}function Zr(e){let t=new Set,r=[];return le(e).forEach(o=>{O(e,o,(n,i)=>{let a=f(n);!i.length&&!t.has(a)&&(t.add(a),r.push(n))})}),r}function eo(e){return Object.keys(e).length===0}function z(e,t,r){let o=fe(r-1),n=fe(r+1),i=g(t,r),a=g(t,o),s=g(t,n),c=x(e,t),u=x(e,i),d=x(e,a),Te=x(e,s);return c<=d&&c<=Te&&u<d&&u<Te}function we(e,t){return y(e,t).length>0}function C(e,t,r){return ce(e,o=>{Be(o,t,r)})}function Be(e,t,r){let o=$(e,t);if(!o)throw new N(t);return ue(Ge(e,t),o,r)}function to(e,t,r){let o=structuredClone(e);return Be(o,t,r)}function ro(e,t,r){return ce(e,o=>{ue(o,t,r)})}function ue(e,t,r){let{q:o,r:n}=r;return o in e||(e[o]={}),n in e[o]||(e[o][n]=[]),e[o][n].push(t),e}function at(e,t,r){if(arguments.length===2)return n=>at(n,e,t);let o=structuredClone(e);return ue(o,t,r)}function oo(e,t){return ce(e,r=>Ge(r,t))}function Ge(e,t){let{q:r,r:o}=t,n=e[r]?.[o]||[];if(!n.pop())throw new N(t);return n.length===0&&delete e[r][o],Object.keys(e[r]).length===0&&delete e[r],e}function st(e,t){if(arguments.length===1)return o=>st(o,e);let r=structuredClone(e);return Ge(r,t)}function ct(e){return e.slice().sort((t,r)=>{let o=r.coordinate.r-t.coordinate.r;return o<0?1:o===0?t.tiles.length-r.tiles.length:-1})}function ut(e,t,r){return!O(e,t,(o,n,i)=>!r(o,n,i))}function be(e,t,r){let o=new Set,n=[],i=s=>{o.add(f(s)),n.push(s),b(e,s,c=>{!B(r,c)&&!o.has(f(c))&&i(c)})};return y(e,t).length&&!B(t,r)&&i(t),n}function X(e,t){if(l(e,t))return[];let r=[],o=new Set([f(t)]),n=(i,a)=>{h(i,a,s=>{let c=f(s);if(!o.has(c)){if(!$(i,a))throw new K(a);o.add(c),r.push(s),n(C(i,a,s),s)}})};return n(e,t),r}function po(e,t,r){let n=ft(e,t,r).reduce((i,a)=>(i[a]=i[a]??[],i[a].push(a),i),{});return Object.values(n)}function ft(e,t,r){let o=[],n={};Ue(e).forEach(a=>{n[a]=(n[a]||0)+1});let i;for(i in r.tileset){let a=Se(t,i),s=r.tileset[i]||0,c=n[a]||0,u=Math.max(0,s-c),d=Array.from({length:u},()=>a);o.push(...d)}return o}function xo(e){return e.map(t=>Y(t)?dt():Z(t)?pt(t.tileId,t.to):ee(t)?lt(t.from,t.to):"").join()}function lt(e,t){return`(${e.q},${e.r})(${t.q},${t.r})`}function dt(){return"x"}function pt(e,t){return`(${t.q},${t.r})[${e}]`}function go(e){function t(a){if(a[0]==="("){let s=a.slice(1,-1).split(",");return{q:parseInt(s[0]),r:parseInt(s[1])}}if(a[0]==="[")return a.slice(1,-1);throw new Error(`Invalid token: ${a}`)}let r=[],o=[],n="",i="";for(let a=0,s=e.length;a<s;++a){let c=e[a];if(c==="#")break;if(c==="x"){r.push({pass:!0});continue}if(n+=c,i+=c,(c===")"||c==="]")&&(o.push(i),i=""),o.length===2){let u=t(o[0]),d=t(o[1]);typeof d=="string"?r.push({tileId:d,to:u}):r.push({from:u,to:d}),o=[],n=""}}return r}function yo(e,t,r){let o=[];for(let s=0;s<6;++s){let c=2*Me*s/6;o.push({x:e*Math.cos(c),y:e*Math.sin(c)})}if(t===0)return[je(o[5],r),...o.map(s=>Le(s,r))].join(" ")+"z";let n=xt(o,t/2),i=gt(n);return Ct(i,r).join(" ")+"z"}function je(e,t){return`M${e.x.toFixed(t)} ${e.y.toFixed(t)}`}function Le(e,t){return`L${e.x.toFixed(t)} ${e.y.toFixed(t)}`}function mt(e,t,r){return`Q ${e.x.toFixed(r)} ${e.y.toFixed(r)}, ${t.x.toFixed(r)} ${t.y.toFixed(r)}`}function ht(e,t){let r=e[0],o=e[1],n=o.x-r.x,i=o.y-r.y,a=Math.hypot(n,i);return[{x:r.x+t*n/a,y:r.y+t*i/a},{x:o.x-t*n/a,y:o.y-t*i/a}]}function xt(e,t){let r=e.map((i,a)=>{let s=a===e.length-1?e[0]:e[a+1];return[i,...ht([i,s],t)]}),o=r[0];return[r[r.length-1],...r,o]}function gt(e){let t=null,r=[];return e.forEach(([o,n,i])=>{t&&r.push([t,o,n]),t=i}),r}function Ct(e,t){let r=[],o=e.length-1;return e.forEach(([n,i,a],s)=>{s===0?r.push(je(n,t)):r.push(Le(n,t)),s!==o&&r.push(mt(i,a,t))}),r}})();
